<?php
/**
 * Full Featured PHP Browser/OS detection
 * @author Harald Hope
 * @link http://techpatterns.com/downloads/php_browser_detection.php
 * @version 5.5.1
 */

if (!defined('ABSPATH')) exit;

// Minified with http://labs.builtbyprime.com/tinyphp/

/**
 * Gives you everything you wanted to know and more about the users browser. @see http://techpatterns.com/downloads/php_browser_detection.php for a reference
 * @return mixed
 */
function browser_detection($which_test,$test_excludes='',$external_ua_string=''){script_time();static $a_full_assoc_data,$a_khtml_data,$a_mobile_data,$a_moz_data,$a_engine_data,$a_trident_data,$a_webkit_data,$b_dom_browser,$b_repeat,$b_safe_browser,$browser_name,$browser_number,$browser_math_number,$browser_user_agent,$browser_working,$html_type,$ie_version,$khtml_type,$khtml_type_number,$mobile_test,$moz_type_number,$moz_rv,$moz_rv_full,$moz_release_date,$moz_type,$os_number,$os_type,$layout_engine,$layout_engine_nu,$layout_engine_nu_full,$trident_type,$trident_type_number,$true_ie_number,$ua_type,$webkit_type,$webkit_type_number;if($external_ua_string){$b_repeat=false;}if(!$b_repeat){$a_browser_math_number='';$a_full_assoc_data='';$a_full_data='';$a_khtml_data='';$a_mobile_data='';$a_moz_data='';$a_os_data='';$a_trident_data='';$a_unhandled_browser='';$a_webkit_data='';$b_dom_browser=false;$b_os_test=true;$b_mobile_test=true;$b_safe_browser=false;$b_success=false;$browser_math_number='';$browser_temp='';$browser_working='';$browser_number='';$html_type='';$html_type_browser_nu='';$ie_version='';$layout_engine='';$layout_engine_nu='';$layout_engine_nu_full='';$khtml_type='';$khtml_type_number='';$mobile_test='';$moz_release_date='';$moz_rv='';$moz_rv_full='';$moz_type='';$moz_type_number='';$os_number='';$os_type='';$run_time='';$trident_type='';$trident_type_number='';$true_ie_number='';$ua_type='bot';$webkit_type='';$webkit_type_number='';if($test_excludes){switch($test_excludes){case '1':$b_os_test=false;break;case '2':$b_mobile_test=false;break;case '3':$b_os_test=false;$b_mobile_test=false;break;default:die('Error: bad $test_excludes parameter 2 used: '.$test_excludes);break;}}if($external_ua_string){$browser_user_agent=strtolower($external_ua_string);}elseif(isset($_SERVER['HTTP_USER_AGENT'])){$browser_user_agent=strtolower($_SERVER['HTTP_USER_AGENT']);}else{$browser_user_agent='';}$a_browser_types=array(array('msie',true,'ie','bro'),array('webkit',true,'webkit','bro'),array('opera',true,'op','bro'),array('khtml',true,'khtml','bro'),array('gecko',true,'moz','bro'),array('netpositive',false,'netp','bbro'),array('lynx',false,'lynx','bbro'),array('elinks ',false,'elinks','bbro'),array('elinks',false,'elinks','bbro'),array('links2',false,'links2','bbro'),array('links ',false,'links','bbro'),array('links',false,'links','bbro'),array('w3m',false,'w3m','bbro'),array('webtv',false,'webtv','bbro'),array('amaya',false,'amaya','bbro'),array('dillo',false,'dillo','bbro'),array('ibrowse',false,'ibrowse','bbro'),array('icab',false,'icab','bro'),array('crazy browser',true,'ie','bro'),array('answerbus',false,'answerbus','bot'),array('ask jeeves',false,'ask','bot'),array('teoma',false,'ask','bot'),array('baiduspider',false,'baidu','bot'),array('bingbot',false,'bing','bot'),array('boitho.com-dc',false,'boitho','bot'),array('exabot',false,'exabot','bot'),array('fast-webcrawler',false,'fast','bot'),array('ia_archiver',false,'ia_archiver','bot'),array('googlebot',false,'google','bot'),array('google web preview',false,'googlewp','bot'),array('mediapartners-google',false,'adsense','bot'),array('msnbot',false,'msn','bot'),array('objectssearch',false,'objectsearch','bot'),array('scooter',false,'scooter','bot'),array('yahoo-verticalcrawler',false,'yahoo','bot'),array('yahoo! slurp',false,'yahoo','bot'),array('yahoo-mm',false,'yahoomm','bot'),array('inktomi',false,'inktomi','bot'),array('slurp',false,'inktomi','bot'),array('zyborg',false,'looksmart','bot'),array('almaden',false,'ibm','bot'),array('comodospider',false,'comodospider','bot'),array('gigabot',false,'gigabot','bot'),array('iltrovatore-setaccio',false,'il-set','bot'),array('lexxebotr',false,'lexxebotr','bot'),array('magpie-crawlero',false,'magpie-crawler','bot'),array('naverbot',false,'naverbot','bot'),array('omgilibot',false,'omgilibot','bot'),array('openbot',false,'openbot','bot'),array('psbot',false,'psbot','bot'),array('sogou',false,'sogou','bot'),array('sosospider',false,'sosospider','bot'),array('sohu-search',false,'sohu','bot'),array('surveybot',false,'surveybot','bot'),array('vbseo',false,'vbseo','bot'),array('w3c_validator',false,'w3c','lib'),array('wdg_validator',false,'wdg','lib'),array('libwww-perl',false,'libwww-perl','lib'),array('jakarta commons-httpclient',false,'jakarta','lib'),array('python-urllib',false,'python-urllib','lib'),array('getright',false,'getright','dow'),array('wget',false,'wget','dow'),array('mozilla/4.',false,'ns','bbro'),array('mozilla/3.',false,'ns','bbro'),array('mozilla/2.',false,'ns','bbro'));$a_gecko_types=array('bonecho','camino','conkeror','epiphany','fennec','firebird','flock','galeon','iceape','icecat','k-meleon','minimo','multizilla','phoenix','skyfire','songbird','swiftfox','seamonkey','shadowfox','shiretoko','iceweasel','firefox','minefield','netscape6','netscape','rv');$a_khtml_types=array('konqueror','khtml');$a_trident_types=array('ucbrowser','ucweb','msie');$a_webkit_types=array('arora','bolt','beamrise','chromium','chrome','crios','dooble','epiphany','gtklauncher','icab','konqueror','maxthon','midori','omniweb','opera','qupzilla','rekonq','rocketmelt','uzbl','ucbrowser','ucweb','shiira','sputnik','steel','teashark','safari','applewebkit','webos','xxxterm','webkit');$i_count=count($a_browser_types);for($i=0;$i<$i_count;$i++){$browser_temp=$a_browser_types[$i][0];if(strstr($browser_user_agent,$browser_temp)){$b_safe_browser=true;$browser_name=$browser_temp;$b_dom_browser=$a_browser_types[$i][1];$browser_working=$a_browser_types[$i][2];$ua_type=$a_browser_types[$i][3];switch($browser_working){case  'ns':$b_safe_browser=false;$browser_number=get_item_version($browser_user_agent,'mozilla');break;case  'khtml':$browser_number=get_item_version($browser_user_agent,$browser_name);$layout_engine='khtml';$layout_engine_nu=get_item_math_number($browser_number);$layout_engine_nu_full=$browser_number;$j_count=count($a_khtml_types);for($j=0;$j<$j_count;$j++){if(strstr($browser_user_agent,$a_khtml_types[$j])){$khtml_type=$a_khtml_types[$j];$khtml_type_number=get_item_version($browser_user_agent,$khtml_type);$browser_name=$a_khtml_types[$j];$browser_number=get_item_version($browser_user_agent,$browser_name);break;}}break;case  'moz':get_set_count('set',0);$moz_rv_full=get_item_version($browser_user_agent,'rv:');$moz_rv=floatval($moz_rv_full);$j_count=count($a_gecko_types);for($j=0;$j<$j_count;$j++){if(strstr($browser_user_agent,$a_gecko_types[$j])){$moz_type=$a_gecko_types[$j];$moz_type_number=get_item_version($browser_user_agent,$moz_type);break;}}if(!$moz_rv){$moz_rv=floatval($moz_type_number);$moz_rv_full=$moz_type_number;}if($moz_type=='rv'){$moz_type='mozilla';}$browser_number=$moz_rv;get_set_count('set',0);$moz_release_date=get_item_version($browser_user_agent,'gecko/');$layout_engine='gecko';$layout_engine_nu=$moz_rv;$layout_engine_nu_full=$moz_rv_full;if(($moz_release_date<20020400)||($moz_rv<1)){$b_safe_browser=false;}break;case  'ie':$browser_number=get_item_version($browser_user_agent,$browser_name,true,'trident/');get_set_count('set',0);$layout_engine_nu_full=get_item_version($browser_user_agent,'trident/','','');if($layout_engine_nu_full){$layout_engine_nu=get_item_math_number($layout_engine_nu_full);$layout_engine='trident';if(strstr($browser_number,'7.')){$true_ie_number=get_item_math_number($browser_number)+(intval($layout_engine_nu)-3);}else{$true_ie_number=$browser_number;}$j_count=count($a_trident_types);for($j=0;$j<$j_count;$j++){if(strstr($browser_user_agent,$a_trident_types[$j])){$trident_type=$a_trident_types[$j];$trident_type_number=get_item_version($browser_user_agent,$trident_type);break;}}}elseif(intval($browser_number)<=7&&intval($browser_number)>=4){$layout_engine='trident';if(intval($browser_number)==7){$layout_engine_nu_full='3.1';$layout_engine_nu='3.1';}}if($browser_number>=9){$ie_version='ie9x';}elseif($browser_number>=7){$ie_version='ie7x';}elseif(strstr($browser_user_agent,'mac')){$ie_version='ieMac';}elseif($browser_number>=5){$ie_version='ie5x';}elseif(($browser_number>3)&&($browser_number<5)){$b_dom_browser=false;$ie_version='ie4';$b_safe_browser=true;}else{$ie_version='old';$b_dom_browser=false;$b_safe_browser=false;}break;case  'op':$browser_number=get_item_version($browser_user_agent,$browser_name);if(strstr($browser_number,'9.')&&strstr($browser_user_agent,'version/')){get_set_count('set',0);$browser_number=get_item_version($browser_user_agent,'version/');}get_set_count('set',0);$layout_engine_nu_full=get_item_version($browser_user_agent,'presto/');if($layout_engine_nu_full){$layout_engine='presto';$layout_engine_nu=get_item_math_number($layout_engine_nu_full);}if($browser_number<5){$b_safe_browser=false;}break;case  'webkit':$browser_number=get_item_version($browser_user_agent,$browser_name);$layout_engine='webkit';$layout_engine_nu=get_item_math_number($browser_number);$layout_engine_nu_full=$browser_number;$j_count=count($a_webkit_types);for($j=0;$j<$j_count;$j++){if(strstr($browser_user_agent,$a_webkit_types[$j])){$webkit_type=$a_webkit_types[$j];if($webkit_type=='omniweb'){get_set_count('set',2);}$webkit_type_number=get_item_version($browser_user_agent,$webkit_type);if($a_webkit_types[$j]=='gtklauncher'){$browser_name='epiphany';}else{$browser_name=$a_webkit_types[$j];}$browser_number=get_item_version($browser_user_agent,$browser_name);break;}}break;default:$browser_number=get_item_version($browser_user_agent,$browser_name);break;}$b_success=true;break;}}if(!$b_success){$browser_name=substr($browser_user_agent,0,strcspn($browser_user_agent,'();'));if($browser_name&&preg_match('/[^0-9][a-z]*-*\ *[a-z]*\ *[a-z]*/',$browser_name,$a_unhandled_browser)){$browser_name=$a_unhandled_browser[0];if($browser_name=='blackberry'){get_set_count('set',0);}$browser_number=get_item_version($browser_user_agent,$browser_name);}else{$browser_name='NA';$browser_number='NA';}}if($b_os_test){$a_os_data=get_os_data($browser_user_agent,$browser_working,$browser_number);$os_type=$a_os_data[0];$os_number=$a_os_data[1];}$b_repeat=true;$browser_math_number=get_item_math_number($browser_number);if($b_mobile_test){$mobile_test=check_is_mobile($browser_user_agent);if($mobile_test){$a_mobile_data=get_mobile_data($browser_user_agent);$ua_type='mobile';}}}switch($which_test){case  'math_number':$which_test='browser_math_number';break;case  'number':$which_test='browser_number';break;case  'browser':$which_test='browser_working';break;case  'moz_version':$which_test='moz_data';break;case  'true_msie_version':$which_test='true_ie_number';break;case  'type':$which_test='ua_type';break;case  'webkit_version':$which_test='webkit_data';break;}if(!$a_engine_data){$a_engine_data=array($layout_engine,$layout_engine_nu_full,$layout_engine_nu);}if(!$a_khtml_data){$a_khtml_data=array($khtml_type,$khtml_type_number,$browser_number);}if(!$a_moz_data){$a_moz_data=array($moz_type,$moz_type_number,$moz_rv,$moz_rv_full,$moz_release_date);}if(!$a_webkit_data){$a_webkit_data=array($webkit_type,$webkit_type_number,$browser_number);}if(!$a_trident_data){$a_trident_data=array($trident_type,$trident_type_number,$layout_engine_nu,$browser_number);}$run_time=script_time();if($layout_engine_nu){$html_type=get_html_level($layout_engine,$layout_engine_nu);}if(!$a_full_assoc_data){$a_full_assoc_data=array('browser_working'=>$browser_working,'browser_number'=>$browser_number,'ie_version'=>$ie_version,'dom'=>$b_dom_browser,'safe'=>$b_safe_browser,'os'=>$os_type,'os_number'=>$os_number,'browser_name'=>$browser_name,'ua_type'=>$ua_type,'browser_math_number'=>$browser_math_number,'moz_data'=>$a_moz_data,'webkit_data'=>$a_webkit_data,'mobile_test'=>$mobile_test,'mobile_data'=>$a_mobile_data,'true_ie_number'=>$true_ie_number,'run_time'=>$run_time,'html_type'=>$html_type,'engine_data'=>$a_engine_data,'trident_data'=>$a_trident_data);}switch($which_test){case  'full':$a_full_data=array($browser_working,$browser_number,$ie_version,$b_dom_browser,$b_safe_browser,$os_type,$os_number,$browser_name,$ua_type,$browser_math_number,$a_moz_data,$a_webkit_data,$mobile_test,$a_mobile_data,$true_ie_number,$run_time,$html_type,$a_engine_data,$a_trident_data);return $a_full_data;break;case  'full_assoc':return $a_full_assoc_data;break;case  'header_data':if(!headers_sent()){if(stristr($_SERVER["HTTP_ACCEPT"],"application/xhtml+xml")){}else{}}break;default:if(isset($a_full_assoc_data[$which_test])){return $a_full_assoc_data[$which_test];}else{die("You passed the browser detector an unsupported option for parameter 1: ".$which_test);}break;}}function get_item_math_number($pv_browser_number){$browser_math_number='';if($pv_browser_number&&preg_match('/^[0-9]*\.*[0-9]*/',$pv_browser_number,$a_browser_math_number)){$browser_math_number=$a_browser_math_number[0];}return $browser_math_number;}function get_os_data($pv_browser_string,$pv_browser_name,$pv_version_number){$os_working_type='';$os_working_number='';$a_mac=array('intel mac','ppc mac','mac68k');$a_unix_types=array('dragonfly','freebsd','openbsd','netbsd','bsd','unixware','solaris','sunos','sun4','sun5','suni86','sun','irix5','irix6','irix','hpux9','hpux10','hpux11','hpux','hp-ux','aix1','aix2','aix3','aix4','aix5','aix','sco','unixware','mpras','reliant','dec','sinix','unix');$a_linux_distros=array('ubuntu','kubuntu','xubuntu','mepis','xandros','linspire','winspire','jolicloud','sidux','kanotix','debian','opensuse','suse','fedora','redhat','slackware','slax','mandrake','mandriva','gentoo','sabayon','linux');$a_linux_process=array('i386','i586','i686');$a_os_types=array('android','blackberry','iphone','palmos','palmsource','symbian','beos','os2','amiga','webtv','mac','nt','win',$a_unix_types,$a_linux_distros);$i_count=count($a_os_types);for($i=0;$i<$i_count;$i++){$os_working_data=$a_os_types[$i];if(!is_array($os_working_data)&&strstr($pv_browser_string,$os_working_data)&&!strstr($pv_browser_string,"linux")){$os_working_type=$os_working_data;switch($os_working_type){case  'nt':preg_match('/nt ([0-9]+[\.]?[0-9]?)/',$pv_browser_string,$a_nt_matches);if(isset($a_nt_matches[1])){$os_working_number=$a_nt_matches[1];}break;case  'win':if(strstr($pv_browser_string,'vista')){$os_working_number=6.0;$os_working_type='nt';}elseif(strstr($pv_browser_string,'xp')){$os_working_number=5.1;$os_working_type='nt';}elseif(strstr($pv_browser_string,'2003')){$os_working_number=5.2;$os_working_type='nt';}elseif(strstr($pv_browser_string,'windows ce')){$os_working_number='ce';$os_working_type='nt';}elseif(strstr($pv_browser_string,'95')){$os_working_number='95';}elseif((strstr($pv_browser_string,'9x 4.9'))||(strstr($pv_browser_string,' me'))){$os_working_number='me';}elseif(strstr($pv_browser_string,'98')){$os_working_number='98';}elseif(strstr($pv_browser_string,'2000')){$os_working_number=5.0;$os_working_type='nt';}break;case  'mac':if(strstr($pv_browser_string,'os x')){if(strstr($pv_browser_string,'os x ')){$os_working_number=str_replace('_','.',get_item_version($pv_browser_string,'os x'));}else{$os_working_number=10;}}elseif($pv_browser_name=='saf'||$pv_browser_name=='cam'||(($pv_browser_name=='moz')&&($pv_version_number>=1.3))||(($pv_browser_name=='ie')&&($pv_version_number>=5.2))){$os_working_number=10;}break;case  'iphone':$os_working_number=10;break;default:break;}break;}elseif(is_array($os_working_data)&&($i==($i_count-2))){$j_count=count($os_working_data);for($j=0;$j<$j_count;$j++){if(strstr($pv_browser_string,$os_working_data[$j])){$os_working_type='unix';$os_working_number=($os_working_data[$j]!='unix')?$os_working_data[$j]:'';break;}}}elseif(is_array($os_working_data)&&($i==($i_count-1))){$j_count=count($os_working_data);for($j=0;$j<$j_count;$j++){if(strstr($pv_browser_string,$os_working_data[$j])){$os_working_type='lin';$os_working_number=($os_working_data[$j]!='linux')?$os_working_data[$j]:'';break;}}}}$a_os_data=array($os_working_type,$os_working_number);return $a_os_data;}function get_item_version($pv_browser_user_agent,$pv_search_string,$pv_b_break_last='',$pv_extra_search=''){$substring_length=15;$start_pos=0;$string_working_number='';for($i=0;$i<4;$i++){if(strpos($pv_browser_user_agent,$pv_search_string,$start_pos)!==false){$start_pos=strpos($pv_browser_user_agent,$pv_search_string,$start_pos)+strlen($pv_search_string);if(!$pv_b_break_last||($pv_extra_search&&strstr($pv_browser_user_agent,$pv_extra_search))){break;}}else{break;}}$start_pos+=get_set_count('get');$string_working_number=substr($pv_browser_user_agent,$start_pos,$substring_length);$string_working_number=substr($string_working_number,0,strcspn($string_working_number,');/'));if(!is_numeric(substr($string_working_number,0,1))){$string_working_number='';}return $string_working_number;}function get_set_count($pv_type,$pv_value=''){static $slice_increment;$return_value='';switch($pv_type){case  'get':if(is_null($slice_increment)){$slice_increment=1;}$return_value=$slice_increment;$slice_increment=1;return $return_value;break;case  'set':$slice_increment=$pv_value;break;}}function check_is_mobile($pv_browser_user_agent){$mobile_working_test='';$a_mobile_search=array('android','blackberry','epoc','linux armv','palmos','palmsource','windows ce','windows phone os','symbianos','symbian os','symbian','webos','benq','blackberry','danger hiptop','ddipocket',' droid','ipad','ipod','iphone','kindle','kobo','lge-cx','lge-lx','lge-mx','lge vx','lge ','lge-','lg;lx','nintendo wii','nokia','nook','palm','pdxgw','playstation','rim','sagem','samsung','sec-sgh','sharp','sonyericsson','sprint','zune','j-phone','n410','mot 24','mot-','htc-','htc_','htc ','playbook','sec-','sie-m','sie-s','spv ','touchpad','vodaphone','smartphone','armv','midp','mobilephone','avantgo','blazer','elaine','eudoraweb','fennec','iemobile','minimo','mobile safari','mobileexplorer','opera mobi','opera mini','netfront','opwv','polaris','semc-browser','skyfire','up.browser','ucweb','ucbrowser','webpro/','wms pie','xiino','astel','docomo','novarra-vision','portalmmm','reqwirelessweb','vodafone');$j_count=count($a_mobile_search);for($j=0;$j<$j_count;$j++){if(strstr($pv_browser_user_agent,$a_mobile_search[$j])){if($a_mobile_search[$j]!='zune'||strstr($pv_browser_user_agent,'iemobile')){$mobile_working_test=$a_mobile_search[$j];break;}}}return $mobile_working_test;}function get_mobile_data($pv_browser_user_agent){$mobile_browser='';$mobile_browser_number='';$mobile_device='';$mobile_device_number='';$mobile_os='';$mobile_os_number='';$mobile_server='';$mobile_server_number='';$mobile_tablet='';$a_mobile_browser=array('avantgo','blazer','crios','elaine','eudoraweb','fennec','iemobile','minimo','ucweb','ucbrowser','mobile safari','mobileexplorer','opera mobi','opera mini','netfront','opwv','polaris','semc-browser','steel','ultralight','up.browser','webos','webpro/','wms pie','xiino');$a_mobile_device=array('benq','blackberry','danger hiptop','ddipocket',' droid','htc_dream','htc espresso','htc hero','htc halo','htc huangshan','htc legend','htc liberty','htc paradise','htc supersonic','htc tattoo','ipad','ipod','iphone','kindle','kobo','lge-cx','lge-lx','lge-mx','lge vx','lg;lx','nintendo wii','nokia','nook','palm','pdxgw','playstation','sagem','samsung','sec-sgh','sharp','sonyericsson','sprint','j-phone','milestone','n410','mot 24','mot-','htc-','htc_','htc ','lge ','lge-','sec-','sie-m','sie-s','spv ','smartphone','armv','midp','mobilephone','wp','zunehd','zune');$a_mobile_os=array('android','blackberry','epoc','cpu os','iphone os','palmos','palmsource','windows phone os','windows ce','symbianos','symbian os','symbian','webos','linux armv');$a_mobile_server=array('astel','docomo','novarra-vision','portalmmm','reqwirelessweb','vodafone');$a_mobile_tablet=array('ipad','android 3',' gt-p','kindle','kobo','nook','playbook','touchpad',' sch-i');$k_count=count($a_mobile_browser);for($k=0;$k<$k_count;$k++){if(strstr($pv_browser_user_agent,$a_mobile_browser[$k])){$mobile_browser=$a_mobile_browser[$k];$mobile_browser_number=get_item_version($pv_browser_user_agent,$mobile_browser);break;}}$k_count=count($a_mobile_device);for($k=0;$k<$k_count;$k++){if(strstr($pv_browser_user_agent,$a_mobile_device[$k])){$mobile_device=trim($a_mobile_device[$k],'-_');if($mobile_device=='blackberry'){get_set_count('set',0);}$mobile_device_number=get_item_version($pv_browser_user_agent,$mobile_device);$mobile_device=trim($mobile_device);break;}}$k_count=count($a_mobile_os);for($k=0;$k<$k_count;$k++){if(strstr($pv_browser_user_agent,$a_mobile_os[$k])){$mobile_os=$a_mobile_os[$k];if($mobile_os!='blackberry'){$mobile_os_number=str_replace('_','.',get_item_version($pv_browser_user_agent,$mobile_os));}else{$mobile_os_number=str_replace('_','.',get_item_version($pv_browser_user_agent,'version'));if(empty($mobile_os_number)){get_set_count('set',5);$mobile_os_number=str_replace('_','.',get_item_version($pv_browser_user_agent,$mobile_os));}}break;}}$k_count=count($a_mobile_server);for($k=0;$k<$k_count;$k++){if(strstr($pv_browser_user_agent,$a_mobile_server[$k])){$mobile_server=$a_mobile_server[$k];$mobile_server_number=get_item_version($pv_browser_user_agent,$mobile_server);break;}}$k_count=count($a_mobile_tablet);for($k=0;$k<$k_count;$k++){if(strstr($pv_browser_user_agent,$a_mobile_tablet[$k])){$mobile_tablet=trim($a_mobile_tablet[$k]);if($mobile_tablet=='gt-p'||$mobile_tablet=='sch-i'){$mobile_tablet='galaxy-'.$mobile_tablet;}break;}}if(!$mobile_os&&($mobile_browser||$mobile_device||$mobile_server)&&strstr($pv_browser_user_agent,'linux')){$mobile_os='linux';$mobile_os_number=get_item_version($pv_browser_user_agent,'linux');}$a_mobile_data=array($mobile_device,$mobile_browser,$mobile_browser_number,$mobile_os,$mobile_os_number,$mobile_server,$mobile_server_number,$mobile_device_number,$mobile_tablet);return $a_mobile_data;}function get_html_level($pv_render_engine,$pv_render_engine_nu){$html_return=1;$engine_nu=$pv_render_engine_nu;$a_html5_basic=array('gecko'=>20,'khtml'=>45,'presto'=>26,'trident'=>50,'webkit'=>5250);$a_html5_forms=array('gecko'=>20,'khtml'=>50,'presto'=>28,'trident'=>60,'webkit'=>5280);$engine_nu=intval(10*floatval($engine_nu));if(array_key_exists($pv_render_engine,$a_html5_forms)&&$a_html5_forms[$pv_render_engine]<=$engine_nu){$html_return=3;}elseif(array_key_exists($pv_render_engine,$a_html5_basic)&&$a_html5_basic[$pv_render_engine]<=$engine_nu){$html_return=2;}return $html_return;}function script_time(){static $script_time;$elapsed_time='';if(sprintf("%01.1f",phpversion())>=5){if(is_null($script_time)){$script_time=microtime(true);}else{$elapsed_time=(microtime(true)-$script_time);$elapsed_time=sprintf("%01.8f",$elapsed_time);$script_time=NULL;return $elapsed_time;}}}